import{a as oe}from"./chunk-MAARCZNG.js";import{a as P}from"./chunk-EEB4IS4L.js";import{a as te}from"./chunk-KSV44EA3.js";import{a as ae}from"./chunk-36BS6QY6.js";import{c as ie,d as ne,h as ce}from"./chunk-MDAXNIY5.js";import"./chunk-5IC5DNT2.js";import{$ as l,A as Q,Ab as T,B as _,Ba as i,Ca as y,Da as d,Db as L,E as k,Ga as W,H as m,Ha as q,Hb as re,I as h,Ia as X,J as C,Kb as le,La as J,M as $,N as Y,O as w,P as z,Qb as se,R as Z,Ra as u,Rb as pe,Sa as g,Sb as me,Y as U,Ya as I,Yb as de,a as V,db as E,ea as v,eb as O,fa as f,h as A,ha as s,hb as K,ja as e,jb as M,ka as t,la as p,mb as ee,oa as H,p as R,pa as b,qa as S,t as G}from"./chunk-VKIXFHP4.js";import"./chunk-TSRGIXR5.js";function xe(n,r){if(n&1&&(e(0,"option",29),i(1),t()),n&2){let o=r.$implicit;s("value",o),l(),y(o)}}var B=class n{basketItem;isLoading=new Z;_basketService=m(P);_preFrom=new ne;router=m(T);messageService=m(ie);selectQantity=1;stockOptions=[];ngAfterViewInit(){this.stockOptions=this.generateStockOptions(this.basketItem.unitOfStock)}generateStockOptions(r){return Array.from({length:r},(o,a)=>a+1)}updateQuantity(r){this._preFrom.load(this._basketService.updateBasketItemQuantity(this.basketItem,r)),this.isLoading.emit(this._preFrom.isLoading$)}deleteItemFromBasket(r){this._preFrom.load(this._basketService.deleteItemFromBasket(r).pipe(_(o=>{o&&this.messageService.showSuccess("The Item Deleted Successfully")}))),this.isLoading.emit(this._preFrom.isLoading$)}ngOnDestroy(){this._preFrom.unsubscribe()}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=h({type:n,selectors:[["app-shopping-card"]],inputs:{basketItem:[0,"BasketItem","basketItem"]},outputs:{isLoading:"isLoading"},decls:48,vars:14,consts:[[1,"flex","border-b","px-3","flex-col","items-center","md:flex-row","md:items-start","py-2","relative"],[1,"flex","items-center","justify-center","px-3","w-48","h-48","max-sm:w-28","max-sm:h-28","shrink-0","rounded-md"],["loading","lazy",1,"w-full","h-full","object-contain",3,"src"],[1,"flex","flex-col"],[1,"w-full"],[1,"text-base","spicel-font","md:text-2xl","font-semibold"],[1,"text-[14px]","text-gray-700","my-0.5","line-clamp-1"],[1,"text-sm","font-thin","py-1"],[1,"flex","items-center","space-x-1"],[1,"flex","items-center","w-10","px-1","border","-space-x-4","flex-wrap"],[1,"py-1","block","w-full","outline-none","border-transparent","rounded-lg","text-sm","focus:border-blue-500","focus:ring-blue-500","disabled:opacity-50","disabled:pointer-events-none",3,"ngModelChange","ngModel"],["value","1","selected","",1,"px-4"],[3,"value",4,"ngFor","ngForOf"],[1,"w-full","border-t","my-2"],[1,"flex","items-center","space-x-3"],[1,"flex","items-center","py-4","mt-1","space-x-4"],[1,"bx","bx-car","text-3xl","text-gray-600","font-thin"],[1,"font-thin","text-[12px]","md:text-[13px]","text-gray-700"],[1,"text-black"],[1,"bx","bxs-store","text-3xl","text-black","font-thin"],[1,"flex","px-4","w-full","md:w-auto","flex-row","md:flex-col","items-start","md:items-end","mt-2"],[1,"w-[80%]","md:w-auto"],[1,"text-2xl","font-semibold"],[1,"mx-1","text-sm","text-blue-400","font-semibold"],[1,"line-through","text-end","text-gray-400","font-thin","text-[15px]"],["type","button",1,"mt-5","w-[20%]","md:mx-0","font-semibold","text-black","text-xs","md:w-full","flex","items-end","justify-end","shrink-0",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"w-4","fill-current","inline"],["d","M19 7a1 1 0 0 0-1 1v11.191A1.92 1.92 0 0 1 15.99 21H8.01A1.92 1.92 0 0 1 6 19.191V8a1 1 0 0 0-2 0v11.191A3.918 3.918 0 0 0 8.01 23h7.98A3.918 3.918 0 0 0 20 19.191V8a1 1 0 0 0-1-1Zm1-3h-4V2a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v2H4a1 1 0 0 0 0 2h16a1 1 0 0 0 0-2ZM10 4V3h4v1Z"],["d","M11 17v-7a1 1 0 0 0-2 0v7a1 1 0 0 0 2 0Zm4 0v-7a1 1 0 0 0-2 0v7a1 1 0 0 0 2 0Z"],[3,"value"]],template:function(o,a){o&1&&(e(0,"div",0)(1,"div",1),p(2,"img",2),t(),e(3,"div",3)(4,"div",4)(5,"h3",5),i(6),t(),e(7,"p",6),i(8),t(),e(9,"p",7),i(10),t(),e(11,"div",8)(12,"p",7),i(13,"Quantity "),t(),e(14,"div",9)(15,"select",10),X("ngModelChange",function(x){return q(a.selectQantity,x)||(a.selectQantity=x),x}),b("ngModelChange",function(x){return a.updateQuantity(x)}),e(16,"option",11),i(17),t(),f(18,xe,2,2,"option",12),t()()()(),e(19,"div",13)(20,"div",14)(21,"div",15),p(22,"i",16),e(23,"p",17),i(24,"Delivers After : "),e(25,"span",18),i(26),t(),i(27," Days"),t()(),e(28,"div",15),p(29,"i",19),e(30,"p",17),i(31,"In-Store pick up at: Best Buy Bangor Get it by Nov. 8"),t()()()()(),e(32,"div",20)(33,"div",21)(34,"p",22),i(35),u(36,"number"),e(37,"span",23),i(38,"EGP"),t()(),e(39,"p",24),i(40),u(41,"number"),e(42,"span",18),i(43,"EGP"),t()()(),e(44,"button",25),b("click",function(){return a.deleteItemFromBasket(a.basketItem)}),w(),e(45,"svg",26),p(46,"path",27)(47,"path",28),t()()()()),o&2&&(l(2),s("src",a.basketItem.imageUrl,U),l(4),y(a.basketItem.productName),l(2),d(" ",a.basketItem.description," "),l(2),d("SKU : ","#QN85QN90DAFXZA",""),l(5),W("ngModel",a.selectQantity),l(2),y(a.basketItem.quantity),l(),s("ngForOf",a.stockOptions),l(8),y(a.basketItem.deliveryTimeInDays),l(9),y(g(36,10,a.basketItem.offerPrice)),l(5),d("",g(41,12,a.basketItem.price)," "))},dependencies:[E,pe,me,se,re,le,M]})};function he(n,r){n&1&&(e(0,"span",22),i(1,"FREE"),t())}function ve(n,r){if(n&1&&(e(0,"p"),i(1),t()),n&2){let o=S();l(),d("",o.shippingCost()," EGP")}}function ye(n,r){n&1&&(e(0,"p"),i(1,"Checkout "),t())}function Se(n,r){n&1&&(e(0,"div",23),p(1,"span",24),t())}var F=class n{basketItems=v(null);_orderService=m(ae);_router=m(T);subtotal=I(()=>this.basketItems()?.basketItems.reduce((r,o)=>r+o.subTotal,0)??0);shippingCost=I(()=>this.subtotal()>500?0:50);estimatedTax=I(()=>this.subtotal()*7e-4);total=I(()=>this.subtotal()+this.shippingCost()+this.estimatedTax());Isloading=!1;_checkout(){this.Isloading=!0,this._orderService.simulateDelay().subscribe(r=>{this.Isloading=!1,this._orderService.cachecheckoutPrice({subtotal:this.subtotal(),total:this.total(),tax:this.estimatedTax()}),this._router.navigate(["checkout/s"])})}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=h({type:n,selectors:[["app-order-total"]],inputs:{basketItems:"basketItems"},decls:46,vars:14,consts:[[1,"px-1","relative","w-full","bg-[#f7f7f7]","rounded-lg"],[1,"text-[22px]","py-4","merriweather-bold","border-gray-300","border-b","px-2"],[1,"px-2","py-4","border-gray-300","border-b"],[1,"flex","flex-col","justify-center","space-y-3"],[1,"merriweather-bold"],[1,"relative"],[1,"absolute","top-2.5","right-3","text-gray-600"],["placeholder","Enter promo code","type","text",1,"px-4","py-2.5","text-gray-600","border","bg-white","w-full"],[1,"space-y-2","mt-5","px-2","py-2","border-gray-300","border-b","font-semibold"],[1,"flex","items-center","justify-between"],[1,"text-sm"],["class","px-3 text-white bg-red-500 text-[14px] rounded-full",4,"ngIf"],[4,"ngIf"],[1,"text-[22px]","font-semibold"],[1,"text-[22px]"],[1,"pt-2"],[1,"text-center","bg-blue-500","text-white","text-[15px]","py-2","font-semibold","rounded-full","w-full",3,"click"],["class","flex items-center justify-center space-x-4 px-3 ",4,"ngIf"],[1,""],[1,"text-center","bg-[#f2ba36]","text-[20px]","py-1","font-bold","rounded-full","w-full"],[1,"text-[#002e80]"],[1,"text-[#0094d3]"],[1,"px-3","text-white","bg-red-500","text-[14px]","rounded-full"],[1,"flex","items-center","justify-center","space-x-4","px-3"],[1,"loader"]],template:function(o,a){if(o&1&&(e(0,"div",0)(1,"p",1),i(2," Order Summary "),t(),e(3,"div",2)(4,"div",3)(5,"h3",4),i(6,"Promo/Referral code"),t(),e(7,"div",5)(8,"button",6),i(9,"Apply"),t(),p(10,"input",7),t()()(),e(11,"ul",8)(12,"li",9)(13,"p",10),i(14),t(),e(15,"p"),i(16),u(17,"number"),t()(),e(18,"li",9)(19,"p",10),i(20,"Shipping"),t(),f(21,he,2,0,"span",11)(22,ve,2,1,"p",12),t(),e(23,"li",9)(24,"p",10),i(25,"Estimated tax"),t(),e(26,"p"),i(27),u(28,"number"),t()()(),e(29,"ul",8)(30,"li",9)(31,"p",13),i(32,"Estimated Total"),t(),e(33,"p",14),i(34),u(35,"number"),t()(),e(36,"li",15)(37,"button",16),b("click",function(){return a._checkout()}),f(38,ye,2,0,"p",12)(39,Se,2,0,"div",17),t()(),e(40,"li",18)(41,"button",19)(42,"span",20),i(43,"Pay"),t(),e(44,"span",21),i(45,"Pal"),t()()()()()),o&2){let c;l(14),d("Subtotal (",(c=a.basketItems())==null||c.basketItems==null?null:c.basketItems.length," items)"),l(2),d("",g(17,8,a.subtotal())," EGP"),l(5),s("ngIf",a.shippingCost()===0),l(),s("ngIf",a.shippingCost()>0),l(5),d("",g(28,10,a.estimatedTax())," EGP"),l(7),d("",g(35,12,a.total())," EGP"),l(4),s("ngIf",!a.Isloading),l(),s("ngIf",a.Isloading)}},dependencies:[O,M],styles:[".merriweather-bold[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;font-weight:600;color:#1a1818}"]})};var _e=()=>({});function ke(n,r){n&1&&(e(0,"div",23),p(1,"span",24),t())}function Ce(n,r){if(n&1){let o=H();e(0,"div")(1,"app-shopping-card",25),b("isLoading",function(c){$(o);let x=S(2);return Y(x.handleLoading(c))}),t()()}if(n&2){let o=r.$implicit;l(),s("BasketItem",o)}}function we(n,r){if(n&1&&(e(0,"div",2)(1,"a",3)(2,"div",4)(3,"p",5),i(4," Shop for everyone on your list with the breezo . "),t(),e(5,"span",6),i(6," Sign Now "),w(),e(7,"svg",7),p(8,"path",8),t()()()(),f(9,ke,2,0,"div",9),u(10,"async"),z(),e(11,"div",10)(12,"div",11)(13,"div",12)(14,"h2",13),i(15,"Cart"),t(),e(16,"div",14),i(17," Zip code: "),e(18,"span",15),i(19,"04750"),t()()(),e(20,"section",16),f(21,Ce,2,1,"div",17),t()(),e(22,"div",18),p(23,"app-order-total",19),t()(),e(24,"div",20)(25,"p",21),i(26," Your Recent Views"),t(),p(27,"app-owl-carousel",22),t()()),n&2){let o,a=S();l(9),s("ngIf",g(10,9,a.loadingState$)),l(12),s("ngForOf",(o=a.basketItems())==null?null:o.basketItems),l(2),s("basketItems",a.basketItems),l(4),s("Recently",!0)("itemLarge",6)("autoPlay",!1)("service",a.productService)("methodName","GetRecentlyProducts")("params",J(11,_e))}}function Ee(n,r){n&1&&(e(0,"div",26)(1,"div",27),p(2,"img",28),t(),e(3,"div",29)(4,"p",30),i(5,"Your cart is empty!"),t(),e(6,"p",31),i(7,"Add something to make me happy"),t(),e(8,"a",32),i(9,"Continue Shopping"),t()()())}var N=class n{initalloadingFlash=v(!1);basketItems=v(null);productService=m(te);destroy$=new V;_basketService=m(P);basketId=localStorage.getItem("basket_id");lastViewProduct=v(null);loadingState$;ngOnInit(){this.getBasket()}getBasket(){this.basketId&&this._basketService.getBasketByID(this.basketId).pipe(_(r=>{this.basketItems.set(r),this.basketItems()?.basketItems.length===0?this.initalloadingFlash.set(!1):this.initalloadingFlash.set(!0)}),R(r=>A([])),Q(this.destroy$)).subscribe()}handleLoading(r){this.loadingState$=r,this.loadingState$.pipe(G(2e3)).subscribe(o=>{this.getBasket()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=h({type:n,selectors:[["app-shopping-cart"]],decls:2,vars:2,consts:[["class","mt-20 font-sans px-0 md:px-5 lg:px-4 xl:px-8 py-4 relative bg-white",4,"ngIf"],["class","mt-20 flex flex-col items-center justify-center",4,"ngIf"],[1,"mt-20","font-sans","px-0","md:px-5","lg:px-4","xl:px-8","py-4","relative","bg-white"],["href","#",1,"group","block","bg-gray-100","hover:bg-gray-200","focus:outline-none","focus:bg-gray-200","p-4","rounded-lg","text-center","transition","duration-300"],[1,"max-w-[85rem]","px-4","sm:px-6","lg:px-8","mx-auto"],[1,"me-2","inline-block","text-sm","text-gray-800"],[1,"group-hover:underline","group-focus:underline","decoration-2","inline-flex","justify-center","items-center","gap-x-2","font-semibold","text-blue-600","text-sm"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"shrink-0","size-4"],["d","m9 18 6-6-6-6"],["class","absolute bg-[#ffffff92] z-[1000] py-20  inset-0 flex items-center justify-center",4,"ngIf"],[1,"grid","grid-cols-1","lg:grid-cols-8","gap-4","mt-3"],[1,"col-span-1","lg:col-span-5","shrink","overflow-hidden","space-y-4"],[1,"flex","items-center","justify-between","py-3","px-5","mb-5","border-b","text-black","text-2xl"],[1,"spicel-font","text-black","md:text-3xl"],[1,"text-sm"],[1,"text-blue-400"],["aria-labelledby","basket-items-section",1,"space-y-4"],[4,"ngFor","ngForOf"],["aria-labelledby","order-total-section",1,"flex","flex-col","col-span-1","lg:col-span-3","md:px-4","flex-none","lg:px-8","xl:px-12","mt-10"],[3,"basketItems"],[1,"mt-8","mb-4","blur-glass"],[1,"text-[14px]","md:text-[16px]","px-4","py-1","my-2","border-dashed","border-orange-200","font-semibold","rounded-sm","border","shadow-sm","w-[220px]","bg-[#fcfbfb]","text-black"],[3,"Recently","itemLarge","autoPlay","service","methodName","params"],[1,"absolute","bg-[#ffffff92]","z-[1000]","py-20","inset-0","flex","items-center","justify-center"],[1,"loader"],[3,"isLoading","BasketItem"],[1,"mt-20","flex","flex-col","items-center","justify-center"],[1,"flex","justify-center","mt-10","mb-3","h-[200px]"],["src","../../../assets/54b13147340145.Y3JvcCw0MDUsMzE3LDAsNDI.png","alt","Empty shopping cart illustration",1,"object-cover"],[1,"text-center","flex","flex-col","space-y-4"],[1,"text-gray-400","opacity-90"],[1,"text-red-400","opacity-90"],["href","/shop","aria-label","Continue shopping",1,"hover:bg-yellow-400","bg-black","mt-6","text-white","px-6","py-2","rounded-md","shadow-sm"]],template:function(o,a){o&1&&f(0,we,28,12,"div",0)(1,Ee,10,0,"div",1),o&2&&(s("ngIf",a.initalloadingFlash()),l(),s("ngIf",!a.initalloadingFlash()))},dependencies:[oe,E,O,B,F,K],styles:['.spicel-font[_ngcontent-%COMP%]{font-family:Verdana,Geneva,Tahoma,sans-serif}.loader[_ngcontent-%COMP%]{width:48px;height:48px;margin:auto;position:relative}.loader[_ngcontent-%COMP%]:before{content:"";width:48px;height:5px;background:#000;opacity:.25;position:absolute;top:60px;left:0;border-radius:50%;animation:_ngcontent-%COMP%_shadow .5s linear infinite}.loader[_ngcontent-%COMP%]:after{content:"";width:100%;height:100%;background:#d8d8d8;animation:_ngcontent-%COMP%_bxSpin .5s linear infinite;position:absolute;top:0;left:0;border-radius:4px}@keyframes _ngcontent-%COMP%_bxSpin{17%{border-bottom-right-radius:3px}25%{transform:translateY(9px) rotate(22.5deg)}50%{transform:translateY(18px) scaleY(.9) rotate(45deg);border-bottom-right-radius:40px}75%{transform:translateY(9px) rotate(67.5deg)}to{transform:translateY(0) rotate(90deg)}}@keyframes _ngcontent-%COMP%_shadow{0%,to{transform:scale(1)}50%{transform:scaleX(1.2)}}'],changeDetection:0})};var Oe=[{path:"",component:N}],j=class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=C({type:n});static \u0275inj=k({imports:[L.forChild(Oe),L]})};var ge=class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=C({type:n});static \u0275inj=k({imports:[ce,ee,de,j]})};export{ge as ShoppingCartModule};
