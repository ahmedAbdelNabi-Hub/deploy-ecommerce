import{b as j}from"./chunk-MDAXNIY5.js";import{A as n,D as p,H as u,I as h,a as d,b as a,f as b,ja as m,ka as g,l as f,la as v,p as o,v as i}from"./chunk-VKIXFHP4.js";var S=class s{dataSubject=new a(null);isLoadingSubject=new a(!1);errorSubject=new a(!1);destroy$=new d;errorMessage=new a("");errorHandler=u(j);data$=this.dataSubject.asObservable();isLoading$=this.isLoadingSubject.asObservable();hasError$=this.errorSubject.asObservable();errorMessage$=this.errorMessage.asObservable();stateSubject=new a({isLoading:!1,hasError:!1,errorMessage:""});state$=this.stateSubject.asObservable();load(t){this.resetState(),this.isLoadingSubject.next(!0),t.pipe(n(this.destroy$),o(e=>this.handleError(e)),i(()=>this.isLoadingSubject.next(!1))).subscribe(e=>{this.dataSubject.next(e)})}loadMultiple(t){this.resetState(),this.isLoadingSubject.next(!0);let e=Object.keys(t),c=e.map(r=>t[r]);f(c).pipe(n(this.destroy$),o(r=>this.handleError(r)),i(()=>this.isLoadingSubject.next(!1))).subscribe({next:r=>{let l={};e.forEach((y,M)=>{l[y]=r[M]}),this.dataSubject.next(l)},error:r=>{console.error("Error in forkJoin:",r)}})}resetState(){this.dataSubject.next(void 0),this.errorSubject.next(!1),this.errorMessage.next(""),this.stateSubject.next({isLoading:!1,hasError:!1,errorMessage:""})}handleError(t){return this.errorHandler.handleError(t),this.errorHandler.errorMessage$.subscribe({next:e=>{this.errorMessage.next(e)}}),this.errorSubject.next(!0),this.dataSubject.next(void 0),b}unsubscribe(){this.destroy$.next(),this.destroy$.complete(),this.dataSubject.complete(),this.stateSubject.complete()}static \u0275fac=function(e){return new(e||s)};static \u0275prov=p({token:s,factory:s.\u0275fac,providedIn:"root"})};var x=class s{static \u0275fac=function(e){return new(e||s)};static \u0275cmp=h({type:s,selectors:[["app-loading"]],decls:2,vars:0,consts:[[1,"absolute","left-0","bg-[#ffffff5f]","z-50","w-full","h-screen","top-0","py-20","flex","items-center","justify-center"],[1,"loader"]],template:function(e,c){e&1&&(m(0,"div",0),v(1,"div",1),g())},styles:[".loader[_ngcontent-%COMP%]{width:48px;height:48px;border:5px solid #709bff;border-bottom-color:#381695;border-radius:50%;display:inline-block;box-sizing:border-box;animation:_ngcontent-%COMP%_rotation 1s linear infinite}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};export{S as a,x as b};
