import{$ as x,Ba as u,Bb as X,D as j,Db as P,E as h,G as f,H as k,I as F,Ib as Q,J as p,K as G,Lb as W,O as q,P as $,Q as K,R as T,S as B,U as H,Zb as ee,aa as S,b as E,c as C,d as M,ha as Z,ia as Y,j as z,ja as l,ka as c,la as m,mb as O,o as V,pa as D,pb as J,s as R,y as b}from"./chunk-VKIXFHP4.js";import{a as v,g as y}from"./chunk-TSRGIXR5.js";var N=class{constructor(){}loadScript(e,d,t,i=null){if(typeof document<"u"&&!document.getElementById(e)){let s=document.createElement("script");s.async=!0,s.src=d,s.onload=t,i||(i=document.head),i.appendChild(s)}}},A=class{},re={oneTapEnabled:!0},g=(()=>{let e=class e extends N{constructor(t,i){super(),this.clientId=t,this.initOptions=i,this.changeUser=new T,this._socialUser=new E(null),this._accessToken=new E(null),this._receivedAccessToken=new T,this.initOptions=v(v({},re),this.initOptions),this._socialUser.pipe(b(1)).subscribe(this.changeUser),this._accessToken.pipe(b(1)).subscribe(this._receivedAccessToken)}initialize(t,i){return new Promise((s,o)=>{try{this.loadScript(e.PROVIDER_ID,this.getGoogleLoginScriptSrc(i),()=>{if(google.accounts.id.initialize({client_id:this.clientId,auto_select:t,callback:({credential:r})=>{let a=this.createSocialUser(r);this._socialUser.next(a)},prompt_parent_id:this.initOptions?.prompt_parent_id,itp_support:this.initOptions.oneTapEnabled,use_fedcm_for_prompt:this.initOptions.oneTapEnabled}),this.initOptions.oneTapEnabled&&this._socialUser.pipe(V(r=>r===null)).subscribe(()=>google.accounts.id.prompt(console.debug)),this.initOptions.scopes){let r=this.initOptions.scopes instanceof Array?this.initOptions.scopes.filter(a=>a).join(" "):this.initOptions.scopes;this._tokenClient=google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:r,prompt:this.initOptions.prompt,callback:a=>{a.error?this._accessToken.error({code:a.error,description:a.error_description,uri:a.error_uri}):this._accessToken.next(a.access_token)}})}s()})}catch(r){o(r)}})}getLoginStatus(){return new Promise((t,i)=>{this._socialUser.value?t(this._socialUser.value):i(`No user is currently logged in with ${e.PROVIDER_ID}`)})}refreshToken(){return new Promise((t,i)=>{google.accounts.id.revoke(this._socialUser.value.id,s=>{s.error?i(s.error):t(this._socialUser.value)})})}getAccessToken(){return new Promise((t,i)=>{this._tokenClient?(this._tokenClient.requestAccessToken({hint:this._socialUser.value?.email}),this._receivedAccessToken.pipe(R(1)).subscribe(t)):this._socialUser.value?i("No token client was instantiated, you should specify some scopes."):i("You should be logged-in first.")})}revokeAccessToken(){return new Promise((t,i)=>{this._tokenClient?this._accessToken.value?google.accounts.oauth2.revoke(this._accessToken.value,()=>{this._accessToken.next(null),t()}):i("No access token to revoke"):i("No token client was instantiated, you should specify some scopes.")})}signIn(){return Promise.reject('You should not call this method directly for Google, use "<asl-google-signin-button>" wrapper or generate the button yourself with "google.accounts.id.renderButton()" (https://developers.google.com/identity/gsi/web/guides/display-button#javascript)')}signOut(){return y(this,null,function*(){google.accounts.id.disableAutoSelect(),this._socialUser.next(null)})}createSocialUser(t){let i=new A;i.idToken=t;let s=this.decodeJwt(t);return i.id=s.sub,i.name=s.name,i.email=s.email,i.photoUrl=s.picture,i.firstName=s.given_name,i.lastName=s.family_name,i}decodeJwt(t){let s=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),o=decodeURIComponent(window.atob(s).split("").map(function(r){return"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(o)}getGoogleLoginScriptSrc(t){return t?`https://accounts.google.com/gsi/client?hl=${t}`:"https://accounts.google.com/gsi/client"}};e.PROVIDER_ID="GOOGLE";let n=e;return n})(),_=(()=>{let e=class e{get authState(){return this._authState.asObservable()}get initState(){return this._initState.asObservable()}constructor(t,i,s){this._ngZone=i,this._injector=s,this.providers=new Map,this.autoLogin=!1,this.lang="",this._user=null,this._authState=new C(1),this.initialized=!1,this._initState=new M,t instanceof Promise?t.then(o=>{this.initialize(o)}):this.initialize(t)}initialize(t){this.autoLogin=t.autoLogin!==void 0?t.autoLogin:!1,this.lang=t.lang!==void 0?t.lang:"";let{onError:i=console.error}=t;t.providers.forEach(s=>{this.providers.set(s.id,"prototype"in s.provider?this._injector.get(s.provider):s.provider)}),Promise.all(Array.from(this.providers.values()).map(s=>s.initialize(this.autoLogin,this.lang))).then(()=>{if(this.autoLogin){let s=[],o=!1;this.providers.forEach((r,a)=>{let U=r.getLoginStatus();s.push(U),U.then(oe=>{this.setUser(oe,a),o=!0}).catch(console.debug)}),Promise.all(s).catch(()=>{o||(this._user=null,this._authState.next(null))})}this.providers.forEach((s,o)=>{z(s.changeUser)&&s.changeUser.subscribe(r=>{this._ngZone.run(()=>{this.setUser(r,o)})})})}).catch(s=>{i(s)}).finally(()=>{this.initialized=!0,this._initState.next(this.initialized),this._initState.complete()})}getAccessToken(t){return y(this,null,function*(){let i=this.providers.get(t);if(this.initialized)if(i){if(!(i instanceof g))throw e.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN}else throw e.ERR_LOGIN_PROVIDER_NOT_FOUND;else throw e.ERR_NOT_INITIALIZED;return yield i.getAccessToken()})}refreshAuthToken(t){return new Promise((i,s)=>{if(!this.initialized)s(e.ERR_NOT_INITIALIZED);else{let o=this.providers.get(t);o?typeof o.refreshToken!="function"?s(e.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN):o.refreshToken().then(r=>{this.setUser(r,t),i()}).catch(r=>{s(r)}):s(e.ERR_LOGIN_PROVIDER_NOT_FOUND)}})}refreshAccessToken(t){return new Promise((i,s)=>{if(!this.initialized)s(e.ERR_NOT_INITIALIZED);else if(t!==g.PROVIDER_ID)s(e.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN);else{let o=this.providers.get(t);o instanceof g?o.revokeAccessToken().then(i).catch(s):s(e.ERR_LOGIN_PROVIDER_NOT_FOUND)}})}signIn(t,i){return new Promise((s,o)=>{if(!this.initialized)o(e.ERR_NOT_INITIALIZED);else{let r=this.providers.get(t);r?r.signIn(i).then(a=>{this.setUser(a,t),s(a)}).catch(a=>{o(a)}):o(e.ERR_LOGIN_PROVIDER_NOT_FOUND)}})}signOut(t=!1){return new Promise((i,s)=>{if(!this.initialized)s(e.ERR_NOT_INITIALIZED);else if(!this._user)s(e.ERR_NOT_LOGGED_IN);else{let o=this._user.provider,r=this.providers.get(o);r?r.signOut(t).then(()=>{i(),this.setUser(null)}).catch(a=>{s(a)}):s(e.ERR_LOGIN_PROVIDER_NOT_FOUND)}})}setUser(t,i){t&&i&&(t.provider=i),this._user=t,this._authState.next(t)}};e.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found",e.ERR_NOT_LOGGED_IN="Not logged in",e.ERR_NOT_INITIALIZED="Login providers not ready yet. Are there errors on your console?",e.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN="Chosen login provider is not supported for refreshing a token",e.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN="Chosen login provider is not supported for getting an access token",e.\u0275fac=function(i){return new(i||e)(f("SocialAuthServiceConfig"),f(B),f(K))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),te=(()=>{let e=class e{static initialize(t){return{ngModule:e,providers:[_,{provide:"SocialAuthServiceConfig",useValue:t}]}}constructor(t){if(t)throw new Error("SocialLoginModule is already loaded. Import it in the AppModule only")}};e.\u0275fac=function(i){return new(i||e)(f(e,12))},e.\u0275mod=p({type:e}),e.\u0275inj=h({providers:[_],imports:[O]});let n=e;return n})();var ie=(()=>{let e=class e{constructor(t,i){this.type="icon",this.size="medium",this.text="signin_with",this.shape="rectangular",this.theme="outline",this.logo_alignment="left",this.width=0,this.locale="",i.initState.pipe(R(1)).subscribe(()=>{Promise.resolve(this.width).then(s=>{s>400||s<200&&s!=0?Promise.reject("Please note .. max-width 400 , min-width 200 (https://developers.google.com/identity/gsi/web/tools/configurator)"):google.accounts.id.renderButton(t.nativeElement,{type:this.type,size:this.size,text:this.text,width:this.width,shape:this.shape,theme:this.theme,logo_alignment:this.logo_alignment,locale:this.locale})})})}};e.\u0275fac=function(i){return new(i||e)(S(H),S(_))},e.\u0275dir=G({type:e,selectors:[["asl-google-signin-button"]],inputs:{type:"type",size:"size",text:"text",shape:"shape",theme:"theme",logo_alignment:"logo_alignment",width:"width",locale:"locale"}});let n=e;return n})(),se=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=p({type:e}),e.\u0275inj=h({});let n=e;return n})();var I=class n{confirm2(e){throw new Error("Method not implemented.")}confirm1(e){throw new Error("Method not implemented.")}visible;showDialog(){console.log("show dialog")}socialAuthService=k(_);password="";showPassword=!1;_http=k(J);togglePasswordVisibility(){this.showPassword=!this.showPassword}ngOnInit(){this.socialAuthService.authState.subscribe(e=>{console.log(e)})}static \u0275fac=function(d){return new(d||n)};static \u0275cmp=F({type:n,selectors:[["app-login"]],decls:46,vars:3,consts:[[1,"w-full","h-screen"],[1,"flex-1","flex-col","items-center","justify-center","h-screen","mt-20","md:mt-10"],[1,"w-full","md:w-[80%]","lg:w-[45%]","mt-7","px-2","md:px-28","flex","items-center","justify-center","bg-white","container","mx-auto"],[1,"w-full","px-2"],[1,"p-4","sm:p-7"],[1,"relative","text-center","flex","items-center","justify-center","space-x-2"],["routerLink","",1,"flex","px-3","py-3","items-center","flex-row"],["src","../../../../assets/logo-2-removebg-preview.png",1,"w-[150px]","h-9"],[1,"mb-4","py-2","text-center","text-2xl","font-bold","text-[#150922]"],[1,"mt-5"],[1,"grid","gap-y-4"],["for","email",1,"block","text-sm","mb-2"],[1,"relative"],[1,"text-gray-600","bx","bx-envelope","absolute","top-3.5","left-2"],["placeholder","Enter your Email Address","type","email","id","email","name","email","required","","aria-describedby","email-error",1,"py-3","px-8","block","border","w-full","border-gray-200","rounded-lg","text-sm","outline-none"],[1,"hidden","absolute","inset-y-0","end-0","pointer-events-none","pe-3"],["width","16","height","16","fill","currentColor","viewBox","0 0 16 16","aria-hidden","true",1,"size-5","text-red-500"],["d","M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"],["id","email-error",1,"hidden","text-xs","text-red-600","mt-2"],[1,"flex","justify-between","items-center"],["for","password",1,"block","text-sm","mb-2"],[1,"text-gray-600","bx","bx-lock-alt","absolute","top-3.5","left-2"],["placeholder","Enter your password","required","","aria-describedby","password-error",1,"py-3","px-8","block","border","w-full","border-gray-200","rounded-lg","text-sm","outline-none",3,"type"],["type","button",1,"absolute","top-3.5","right-2","text-gray-600","focus:outline-none",3,"click"],["href","../examples/html/recover-account.html",1,"inline-flex","items-end","justify-end","w-full","gap-x-1","text-sm","text-[#2966eb]","decoration-2","hover:underline","focus:outline-none","focus:underline","font-medium"],["id","password-error",1,"hidden","text-xs","text-red-600","mt-2"],["type","button",1,"w-full","py-3","px-4","inline-flex","justify-center","items-center","gap-x-2","text-sm","font-medium","rounded-lg","border","border-transparent","bg-[#2966eb]","uppercase","text-white",3,"click"],[1,"py-3","flex","items-center","text-xs","text-gray-400","uppercase","before:flex-1","before:border-t","before:border-gray-200","before:me-6","after:flex-1","after:border-t","after:border-gray-200","after:ms-6"],["shape","square","theme","outline","logo_alignment","center","size","large","type","standard","size","large"],[1,"mt-2","text-sm","text-gray-600","text-center"],["routerLink","/auth/create/account",1,"text-blue-600","decoration-2","hover:underline","focus:outline-none","focus:underline","font-medium"]],template:function(d,t){d&1&&(l(0,"main",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"a",6),m(7,"img",7),c()(),l(8,"p",8),u(9,"Sign In To Your Account."),c(),l(10,"div",9)(11,"form")(12,"div",10)(13,"div")(14,"label",11),u(15,"Email Address"),c(),l(16,"div",12),m(17,"i",13)(18,"input",14),l(19,"div",15),q(),l(20,"svg",16),m(21,"path",17),c()()(),$(),l(22,"p",18),u(23,"Please include a valid email address so we can get back to you"),c()(),l(24,"div")(25,"div",19)(26,"label",20),u(27,"Password"),c()(),l(28,"div",12),m(29,"i",21)(30,"input",22),l(31,"button",23),D("click",function(){return t.togglePasswordVisibility()}),m(32,"i"),c()(),l(33,"a",24),u(34,"Forgot password?"),c(),l(35,"p",25),u(36,"8+ characters required"),c()(),l(37,"button",26),D("click",function(){return!0}),u(38,"Sign in "),c(),l(39,"div",27),u(40," Or"),c(),m(41,"asl-google-signin-button",28),l(42,"p",29),u(43," Don't have an account yet? "),l(44,"a",30),u(45," Sign up here "),c()()()()()()()()()()),d&2&&(x(30),Z("type",t.showPassword?"text":"password"),x(2),Y(t.showPassword?"bx bx-show":"bx bx-hide"))},dependencies:[W,Q,ie,X],styles:["*[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif}"]})};var le=[{path:"",component:I}],w=class n{static \u0275fac=function(d){return new(d||n)};static \u0275mod=p({type:n});static \u0275inj=h({imports:[P.forChild(le),P]})};var ne=class n{static \u0275fac=function(d){return new(d||n)};static \u0275mod=p({type:n});static \u0275inj=h({providers:[{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!1,lang:"en",providers:[{id:g.PROVIDER_ID,provider:new g("810583915097-vgf50ast4vi6i0fg4aaolahm57k5t5k2.apps.googleusercontent.com",{oneTapEnabled:!1,prompt:"consent"})}],onError:e=>{console.error(e)}}}],imports:[O,ee,te,se,w]})};export{ne as LoginModule};
